# Компилятор языка MiniJava
> Курс **"Языки программирования и теории компиляции"**, *4 семестр ФИВТ МФТИ*

Ветка `master` соответствует актуальной версии проекта 
и последнему чекпоинту. 

Код старых чекпоинтов в отрыве от остальных частей проекта 
можно посмотреть в соответствующих ветках.

---

## Установка пререквизитов

Вариант для пакетного менеджера **Ubuntu**:

```shell
sudo apt-get install arm-linux-gnueabihf qemu-user-static
```

--- 

## Пример работы

### **Сборка компилятора**

```shell
mkdir -p Compiler/build
cd Compiler/build
cmake ..
make
```

### **Запуск компилятора**

```shell
./Compiler --src ../examples/<example>
```

В результате в текущей директории *build* генерируются 
промежуточные файлы компиляции и ассемблерный код.

### **Запуск ассемблерного кода (с кросс-компилятором ARM)**

```shell
arm-linux-gnueabihf-gcc -static final_program.s -o final_program
./final_program
```

---

## Описание структуры и этапов работы

### [Грамматика языка](Grammar)

Правила грамматики описаны в файле `parser.y`.
Возможные токены - в файле `scanner.l`.

Во время компиляции для проверки корректности написанного кода 
и сбора статистики строится абстрактное синтаксическое дерево, в 
котором каждая вершина соответствует терминальному или 
нетерминальному символу грамматики.

В частности, оформлены в виде классов и специализированы:
- `Declaration` (объявление)
- `Expression` (выражение)
- `Statement` (высказывание)
- `NamedEntity` (именованная сущность, она же lvalue)
- `Type` (тип)

`Service` - более абстрактные классы для связи текста программы 
воедино.

Лексический анализатор строится с помощью 
[Flex](https://linux.die.net/man/1/flex), синтаксический - с помощью 
[GNU Bison](https://www.gnu.org/software/bison/).